---
name: Dual-Agent Response Architecture (Fast Narrator + Arbiter)
status: open
created: 2026-02-12T01:29:24Z
updated: 2026-02-12T01:48:32Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/75
imported: true
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Dual-Agent Response Architecture (Fast Narrator + Arbiter)

## Summary

During gameplay, response times are too long because a single agent handles both narrative output and mechanical resolution sequentially. Implement a dual-agent architecture where a fast narrator provides immediate feedback while a slower arbiter resolves mechanics in parallel.

**Discovered during:** Issue #73 (Game Loop Playtest)

## Proposed Architecture

| Agent | Model | Role | Latency |
|---|---|---|---|
| **Narrator** | Haiku (fast) | Immediate narrative response, atmosphere, NPC dialogue | ~1-2s |
| **Arbiter** | Sonnet (reasoned) | Mechanics, dice rolls, state updates, rules adjudication | ~5-10s |

### Flow
```
Player action → Narrator (Haiku) responds immediately with narration
              → Arbiter (Sonnet) resolves mechanics in parallel
              → Merge: narrative updated with mechanical results if needed
```

### Complementary Optimizations
1. Batch dice rolls — Roll all dice in a single parallel call
2. Pre-roll enemy actions — Roll enemy dice before narrating
3. Streaming — Text appears progressively

### Reference
- Academic paper: [arxiv:2502.19519v2](https://arxiv.org/html/2502.19519v2) — Multi-agent GM beats single-agent

## Acceptance Criteria

- [ ] Player receives initial narrative feedback within 2-3 seconds of action
- [ ] Mechanical resolution happens in parallel without blocking narrative
- [ ] Final output merges narrative and mechanical results coherently
- [ ] Combat turns feel responsive (< 5 seconds for enemy turns)
- [ ] No loss of narrative quality compared to single-agent approach

## Effort Estimate

- Size: L
- Hours: 12-16
- Parallel: true
- Note: Requires architectural design — may need its own PRD when work begins

## Definition of Done

- [ ] Dual-agent architecture implemented
- [ ] Response latency improved per acceptance criteria
- [ ] Narrative quality maintained
- [ ] Tests passing
- [ ] Performance benchmarks documented
