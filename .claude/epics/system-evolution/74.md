---
name: Character Model v2 & Creation Wizard
status: open
created: 2026-02-12T01:29:19Z
updated: 2026-02-12T01:29:19Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/74
imported: true
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Character Model v2 & Creation Wizard

## Summary

The current Character model lacks dedicated fields for many core D&D 5e attributes, forcing the DM persona to use the `notes` field as a catch-all. Additionally, there is no guided character creation process.

**Discovered during:** Issue #73 (Game Loop Playtest)

## Missing Model Fields

| Area | Missing Fields |
|---|---|
| **Progression** | `experience_points`, `hit_dice_type`, `hit_dice_total`, `hit_dice_remaining` |
| **Proficiencies** | `skill_proficiencies[]`, `saving_throw_proficiencies[]`, `languages[]`, `tool_proficiencies[]` |
| **Class Features** | `features[]` (structured), `subclass`, `fighting_style` |
| **Equipment Slots** | `weapon_main`, `weapon_off`, `armor`, `shield` linked to inventory |
| **Combat** | `speed`, `conditions[]`, `spell_slots_max{}`, `spell_slots_current{}` |
| **Auto-calculated** | `proficiency_bonus` (from level) |

## Character Creation Wizard

A guided step-by-step process that scales with starting level:

1. Choose race → racial traits, ability bonuses, languages
2. Choose class → hit die, saving throws, level 1 features
3. Ability score method → Standard Array / Point Buy / 4d6 drop lowest
4. Apply racial bonuses to abilities
5. Choose background → proficiencies, languages, equipment
6. Choose skill proficiencies (from class options)
7. Choose class-specific features (e.g., Fighting Style for Fighter)
8. Calculate HP → max at level 1, roll or average for higher levels
9. IF level > 1 → repeat level-up choices per level
10. Starting equipment → manual choices OR starting gold
11. Final review and confirmation

## Acceptance Criteria

- [ ] All D&D 5e character sheet fields have dedicated model fields
- [ ] `create_character` triggers an interactive wizard flow
- [ ] HP calculated correctly
- [ ] Ability score generation supports at least 3 methods
- [ ] Starting equipment assigned based on class + background
- [ ] Level-up process handles subclass selection, ASI, and feature choices
- [ ] Backward compatible with existing characters

## Effort Estimate

- Size: L/XL
- Hours: 16-24
- Parallel: true
- Note: May need its own PRD and sub-task decomposition when work begins

## Definition of Done

- [ ] Character model extended with all fields
- [ ] Creation wizard implemented
- [ ] Level-up process working
- [ ] Tests passing
- [ ] Backward compatibility verified
