---
name: Fix /dm:action and /dm:combat slash command invocation
status: closed
created: 2026-02-12T01:49:54Z
updated: 2026-02-12T11:40:31Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/77
imported: true
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Fix /dm:action and /dm:combat Slash Command Invocation

## Summary

The `/dm:action` and `/dm:combat` slash commands exist as command files but fail to activate when the player types them in chat. The Skill tool returns an error due to `disable-model-invocation: true`.

**Discovered during:** Issue #73 (Game Loop Playtest, Session 2)

## Steps to Reproduce

1. Start a session with `/dm:start Playtest Valley` — works correctly
2. Type `/dm:action Cerco trappole nella stanza`
3. Claude attempts to invoke via Skill tool
4. Error: `Skill dm:action cannot be used with Skill tool due to disable-model-invocation`

## Affected Commands

| Command | File | Status |
|---|---|---|
| `/dm:start` | `.claude/commands/dm/start.md` | Works |
| `/dm:save` | `.claude/commands/dm/save.md` | Works |
| `/dm:action` | `.claude/commands/dm/action.md` | Broken |
| `/dm:combat` | `.claude/commands/dm/combat.md` | Broken |

## Fix Options

1. **Remove `disable-model-invocation: true`** — Allow the Skill tool to invoke them (simplest fix)
2. **Ensure command parser intercepts mid-conversation** — If this is a Claude Code limitation, document it
3. **Hybrid approach** — Allow both direct invocation and Skill tool invocation

## Acceptance Criteria

- [ ] `/dm:action <text>` works correctly mid-session
- [ ] `/dm:combat <text>` works correctly mid-session
- [ ] Both commands activate the DM persona and game loop
- [ ] No regressions on `/dm:start` and `/dm:save`

## Effort Estimate

- Size: S-M
- Hours: 2-3
- Parallel: true
- Priority: High (core gameplay commands)

## Definition of Done

- [ ] Both commands functional mid-session
- [ ] Root cause documented
- [ ] Fix applied and tested
