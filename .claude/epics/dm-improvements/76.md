---
name: Dice Roll Context Labels
status: open
created: 2026-02-12T01:29:33Z
updated: 2026-02-12T01:29:33Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/76
imported: true
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Dice Roll Context Labels

## Summary

When dice are rolled during gameplay, the tool output appears without context about who is rolling and why. The player sees raw mechanics without declaration, breaking immersion and causing confusion in multi-combatant scenarios.

**Discovered during:** Issue #73 (Game Loop Playtest)

## Problem

Current output when a die is rolled:
```
dm20-protocol - roll_dice (MCP)(dice_notation: "1d20+4")
  ðŸŽ² **1d20+4** [9] +4 = **13**
```

The player doesn't know:
- **Who** is rolling (Goblin 1? Goblin 2? Aldric?)
- **Why** (attack? skill check? saving throw?)
- **Against what** (target AC? DC?)

## Proposed Solution

### Part A: Tool Enhancement (code change)

Add an optional `label` parameter to `roll_dice`:

```python
roll_dice(
    dice_notation="1d20+4",
    label="Goblin Archer 2 attack vs Aldric"
)
```

### Part B: DM Persona Update (instruction change)

Update the DM persona instructions to ALWAYS declare the roll context.

## Acceptance Criteria

- [ ] `roll_dice` accepts an optional `label` parameter
- [ ] Label is displayed in the tool output alongside the roll result
- [ ] DM persona instructions updated to require roll declarations
- [ ] Every roll during gameplay shows who is rolling and for what purpose

## Effort Estimate

- Size: S
- Hours: 1-2
- Parallel: true

## Definition of Done

- [ ] Code change: `label` parameter added to `roll_dice`
- [ ] Label displayed in output
- [ ] DM persona updated
- [ ] Tests passing
