---
name: Claudmaster Directory Structure and Base Classes
status: completed
created: 2026-02-05T19:06:45Z
updated: 2026-02-06T00:01:00Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/30
depends_on: []
parallel: true
conflicts_with: []
---

# Claudmaster Directory Structure and Base Classes

## Description

Set up the foundational directory structure and core base classes for the Claudmaster AI DM system. This task establishes the architectural foundation that all other Claudmaster components will build upon, including the abstract Agent class with ReAct pattern interface, configuration dataclass, and session management.

## Acceptance Criteria

- [ ] Create `src/gamemaster_mcp/claudmaster/` directory structure
- [ ] Create `__init__.py` with proper exports
- [ ] Define abstract `Agent` base class with ReAct pattern interface (Reason, Act, Observe)
- [ ] Create `ClaudmasterConfig` dataclass for campaign-level settings
- [ ] Create `ClaudmasterSession` class for managing session state
- [ ] Add type hints throughout all classes
- [ ] Include docstrings for all public methods and classes
- [ ] Create unit tests for base classes

## Technical Details

### Directory Structure

```
src/gamemaster_mcp/claudmaster/
├── __init__.py
├── base.py          # Agent abstract class
├── config.py        # ClaudmasterConfig dataclass
├── session.py       # ClaudmasterSession class
└── agents/
    └── __init__.py
```

### Agent Abstract Class (ReAct Pattern)

```python
from abc import ABC, abstractmethod
from typing import Any

class Agent(ABC):
    """Base class for all Claudmaster agents using ReAct pattern."""

    @abstractmethod
    async def reason(self, context: dict) -> str:
        """Analyze the current situation and decide on action."""
        pass

    @abstractmethod
    async def act(self, reasoning: str) -> Any:
        """Execute the decided action."""
        pass

    @abstractmethod
    async def observe(self, result: Any) -> dict:
        """Process the result of the action."""
        pass
```

### ClaudmasterConfig Dataclass

Should include fields for:
- LLM provider configuration
- Agent behavior settings
- Narrative style preferences
- Difficulty settings
- House rules toggles

### ClaudmasterSession Class

Should track:
- Current conversation history
- Active agents and their states
- Turn counter
- Session metadata

## Dependencies

- None (foundation task)

## Effort Estimate

- **Size:** M
- **Estimated Hours:** 6
- **Complexity:** Medium - establishing patterns for entire system

## Definition of Done

1. All directory structure created and properly organized
2. Agent abstract class fully defined with ReAct interface
3. ClaudmasterConfig dataclass complete with validation
4. ClaudmasterSession class manages state correctly
5. All code passes linting and type checking
6. Unit tests written and passing
7. Documentation/docstrings complete
8. Code reviewed and approved
