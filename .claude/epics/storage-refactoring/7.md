---
name: Add format parameter to list tools
status: open
created: 2026-02-01T23:51:23Z
updated: 2026-02-01T23:51:23Z
github: https://github.com/Polloinfilzato/gamemaster-mcp/issues/6
updated: 2026-02-02T00:06:07Z
depends_on: [6]
parallel: false
conflicts_with: []
---

# Task: Add format parameter to list tools

## Description

Add optional `format` parameter to list tools (`list_characters`, `list_npcs`, `list_locations`, `list_quests`, `get_campaign_info`) to support TOON output format.

## Acceptance Criteria

- [ ] Add `format: Literal["json", "toon"] = "json"` parameter to list tools
- [ ] Default format is "json" (backward compatible)
- [ ] When format="toon", encode response using TOON encoder
- [ ] Document format parameter in tool docstrings
- [ ] Verify 30%+ token reduction with TOON format

## Technical Details

**Affected tools in `main.py`:**
- `list_characters(format: str = "json")`
- `list_npcs(format: str = "json")`
- `list_locations(format: str = "json")`
- `list_quests(format: str = "json")`
- `get_campaign_info(format: str = "json")`

**Implementation pattern:**
```python
@server.tool()
async def list_characters(format: str = "json") -> str:
    characters = storage.list_characters_detailed()
    if format == "toon":
        return encode_to_toon(characters)
    return json.dumps(characters)
```

**Files affected:**
- `src/gamemaster_mcp/main.py`

## Dependencies

- [ ] Task 6: Add python-toon dependency and TOON encoder

## Effort Estimate

- Size: S
- Hours: 2-3
- Parallel: false (depends on Task 6)

## Definition of Done

- [ ] All 5 tools updated with format parameter
- [ ] JSON default maintained
- [ ] TOON output working
- [ ] Token reduction verified
