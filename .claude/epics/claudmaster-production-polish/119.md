---
name: Guided Onboarding Flow for New Users
status: open
created: 2026-02-15T01:33:47Z
updated: 2026-02-15T01:39:36Z
github: https://github.com/Polloinfilzato/dm20-protocol/issues/119
depends_on: [118]
parallel: false
conflicts_with: [120, 121]
---

# Task: Guided Onboarding Flow for New Users

## Description
Implement a guided first-session experience in `start_claudmaster_session()` that detects when a new user has no existing campaign and walks them through campaign creation, character setup, and drops them into an engaging first scene — all within 5 minutes. The onboarding should demonstrate the system's narrative capabilities immediately.

## Acceptance Criteria
- [ ] `start_claudmaster_session()` detects no existing campaign and triggers onboarding
- [ ] Onboarding auto-creates a campaign with sensible defaults (name, setting, difficulty)
- [ ] Character creation is guided through Narrator-driven prompts (race, class, name suggestions)
- [ ] First scene is atmospheric and demonstrates: narration quality, interactive environment, simple interaction
- [ ] Entire flow completes in < 5 minutes of user time
- [ ] Returning users (existing campaign) skip onboarding entirely
- [ ] Error handling throughout onboarding uses in-character messages (#118)

## Technical Details
- Modify `start_claudmaster_session()` in `tools/session_tools.py`
- Detection: check if campaign exists in storage directory
- Auto-campaign: use `create_campaign` tool with default values (e.g., "The Forgotten Realms", balanced difficulty)
- Character guidance: Narrator agent generates suggested options; player picks or customizes
- First scene: pre-scripted engaging opening (tavern encounter or similar) that leads to a choice
- Store onboarding state in session metadata so it can be resumed if interrupted
- Must work with all model profiles (quality/balanced/economy)

## Dependencies
- [ ] #118 — Error UX hardening (in-character errors during onboarding)

## Effort Estimate
- Size: M
- Hours: 4-6
- Parallel: false (modifies `session_tools.py`)

## Definition of Done
- [ ] Code implemented
- [ ] New user flow tested manually
- [ ] Onboarding completes in < 5 minutes
- [ ] Tests written for onboarding detection and flow
- [ ] Works across all model profiles
