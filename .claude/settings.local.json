{
  "permissions": {
    "allow": [
      "mcp__dm20-protocol__list_campaigns",
      "mcp__dm20-protocol__load_campaign",
      "mcp__dm20-protocol__list_characters",
      "mcp__dm20-protocol__get_character",
      "mcp__dm20-protocol__update_character",
      "Bash(gh repo fork:*)",
      "mcp__dm20-protocol__get_campaign_info",
      "mcp__dm20-protocol__get_game_state",
      "mcp__dm20-protocol__roll_dice",
      "WebFetch(domain:help.obsidian.md)",
      "WebFetch(domain:plugins.javalent.com)",
      "Bash(.venv/bin/python:*)",
      "Bash(PYTHONPATH=src .venv/bin/python:*)",
      "Bash(python -m pytest:*)",
      "Bash(uv run pytest:*)",
      "Bash(uv run python -m pytest:*)",
      "Bash(uv add:*)",
      "Bash(uv run python:*)",
      "Bash(git merge:*)",
      "Bash(git tag:*)",
      "mcp__dm20-protocol__create_location",
      "mcp__dm20-protocol__create_npc",
      "mcp__dm20-protocol__create_quest",
      "mcp__dm20-protocol__add_event",
      "mcp__dm20-protocol__update_game_state",
      "mcp__MCP_DOCKER__get_transcript",
      "Bash(.venv/bin/pip install:*)",
      "Bash(.venv/bin/python3:*)",
      "Bash(pip3 install:*)",
      "Bash(gh repo view:*)",
      "Bash(gh issue comment:*)",
      "Bash(gh issue close:*)",
      "Bash(ccpm/scripts/pm/epic-status.sh:*)",
      "Bash(sort:*)",
      "Bash(.claude/scripts/pm/epic-status.sh:*)",
      "Bash(.claude/scripts/pm/sync-epic.sh:*)",
      "Bash(pytest:*)",
      "Bash(/usr/local/bin/python3 -m pytest:*)",
      "Bash(/usr/local/bin/python3:*)",
      "mcp__dm20-protocol__get_sessions",
      "mcp__dm20-protocol__list_quests",
      "mcp__dm20-protocol__list_npcs",
      "mcp__dm20-protocol__list_locations",
      "mcp__dm20-protocol__get_events",
      "mcp__dm20-protocol__get_npc",
      "Bash(gh pr list:*)",
      "Bash(gh pr close:*)",
      "Bash(gh pr diff:*)",
      "Bash(git stash:*)",
      "Bash(done)",
      "mcp__dm20-protocol__list_rulebooks",
      "mcp__dm20-protocol__load_rulebook",
      "mcp__dm20-protocol__validate_character_rules",
      "mcp__dm20-protocol__add_session_note",
      "mcp__dm20-protocol__start_combat",
      "mcp__dm20-protocol__next_turn",
      "mcp__dm20-protocol__end_combat",
      "mcp__dm20-protocol__add_item_to_character",
      "mcp__dm20-protocol__get_location",
      "mcp__dm20-protocol__bulk_update_characters",
      "mcp__dm20-protocol__calculate_experience",
      "mcp__dm20-protocol__get_spell_info",
      "mcp__dm20-protocol__search_rules",
      "Bash(grep:*)",
      "Bash(gh api:*)",
      "mcp__dm20-protocol__get_class_info",
      "mcp__dm20-protocol__update_quest",
      "Bash(.venv/bin/pytest tests/test_content_extractor.py -v)",
      "mcp__dm20-protocol__scan_library",
      "mcp__dm20-protocol__list_library",
      "mcp__dm20-protocol__get_library_toc",
      "mcp__dm20-protocol__search_library",
      "mcp__dm20-protocol__ask_books",
      "mcp__dm20-protocol__extract_content",
      "mcp__dm20-protocol__create_campaign",
      "mcp__dm20-protocol__enable_library_source",
      "mcp__dm20-protocol__list_enabled_library",
      "mcp__dm20-protocol__disable_library_source",
      "Bash(.venv/bin/pytest tests/test_markdown_extractor.py -v --tb=short)",
      "Bash(.venv/bin/pytest tests/test_markdown_extractor.py::TestScanLibraryMarkdownIntegration -v)",
      "mcp__dm20-protocol__create_character",
      "mcp__dm20-protocol__get_monster_info",
      "mcp__MCP_DOCKER__apify-slash-website-content-crawler",
      "WebFetch(domain:www.dmsguild.com)",
      "WebFetch(domain:anyflip.com)",
      "Bash(/bin/ls:*)",
      "Bash(claude mcp add --transport stdio gamemaster-mcp --scope project -- uv run gamemaster-mcp)",
      "Bash(DM20_STORAGE_DIR=\"./data\" uv run:*)",
      "Bash(uv pip install:*)",
      "Bash(DM20_STORAGE_DIR=\"./data\" timeout 5 uv run:*)",
      "Bash(uv pip uninstall:*)",
      "WebFetch(domain:arxiv.org)",
      "WebFetch(domain:oracle-rpg.com)",
      "WebFetch(domain:medium.com)",
      "WebFetch(domain:skywork.ai)",
      "Bash(uv run:*)",
      "Bash(PYTHONPATH=\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/src\" timeout 3 uv run:*)",
      "Bash(xattr:*)",
      "Bash(brctl download:*)",
      "Bash(brctl status:*)",
      "Bash(killall:*)",
      "Skill(pm:issue-analyze)",
      "Bash(.venv/bin/pytest tests/test_orchestrator.py tests/test_module_parser.py -v --tb=short)",
      "Skill(pm:epic-status)",
      "Skill(pm:issue-start)",
      "Skill(pm:issue-close)",
      "Bash(for i in 40 41 47 48)",
      "Bash(do gh issue edit $i --remove-label \"in-progress\" --repo Polloinfilzato/dm20-protocol)",
      "Bash(/Users/ema/.local/bin/uv run python -m pytest tests/claudmaster/test_action_interpreter.py -v --tb=short)",
      "Bash(source:*)",
      "Bash(python:*)",
      "Bash(pip install:*)",
      "Bash(git status:*)",
      "Bash(/usr/bin/python3 -m pytest:*)",
      "Bash(pip3 list:*)",
      "Bash(uv:*)",
      "Bash(uv pip list:*)",
      "Bash(.venv/bin/pip:*)",
      "Bash(.venv/bin/pytest tests/ -x -q)",
      "Bash(.venv/bin/pytest tests/ -q --deselect tests/test_library_bindings.py::TestLibraryBindings::test_to_dict)",
      "Bash(.venv/bin/pytest tests/test_library_bindings.py::TestLibraryBindings::test_to_dict -q)",
      "Bash(timeout:*)",
      "Bash(PYTHONPATH=\"$PWD/src\" timeout 15 uv run:*)",
      "Bash(.venv/bin/pytest tests/claudmaster/test_split_party.py tests/claudmaster/test_action_tools.py -q --tb=no)",
      "Bash(.venv/bin/pytest tests/claudmaster/ -q --tb=no)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/epic-claudmaster-ai-dm\" add src/gamemaster_mcp/claudmaster/performance/__init__.py)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/epic-claudmaster-ai-dm\" commit -m \"$\\(cat <<''EOF''\nIssue #68: Merge Stream A and B exports in performance __init__.py\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(cat:*)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" ls-files campaigns/ events/ library/ dnd_data/ .roo/)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" ls-files test_basic.py test_legacy_detection.py test_manual_integration.py test_split_storage.py test_storage_integration.py requirements.txt mypy.ini GUIDA_DM.md INTEGRATION_SUMMARY.md)",
      "Bash(git mv:*)",
      "Bash(for f in test_basic.py test_legacy_detection.py test_manual_integration.py test_split_storage.py)",
      "Bash(do echo \"=== $f ===\")",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" status --short)",
      "Bash(git rm:*)",
      "Bash(if [ -f \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/GUIDA_DM.md\" ])",
      "Bash(then mv \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/GUIDA_DM.md\" \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/docs/GUIDA_DM.md\")",
      "Bash(else echo \"GUIDA_DM.md not found \\(already gitignored\\)\")",
      "Bash(fi)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline -1 -- pyproject.toml)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" status)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" diff --stat)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline -5)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" diff --cached --stat)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" push fork main)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" ls-files:*)",
      "Bash(git ls-tree:*)",
      "Bash(while read f)",
      "Bash(do git show \"5658933:$f\")",
      "Bash(bc:*)",
      "Bash(\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/_analyze_fork.sh\" << 'SCRIPTEOF'\n#!/bin/bash\n# Analysis script: compare codebase at fork point \\(5658933\\) vs current HEAD\n# Excludes .claude/ directory and docs/FastMCP_2.9.0_docs.md\n\nset -euo pipefail\n\nREPO=\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\"\ncd \"$REPO\"\n\nFORK_COMMIT=\"5658933\"\nHEAD_COMMIT=\"HEAD\"\nEXTENSIONS=\"py|md|sh|toml|json\"\n\n# Temporary files\nOLD_FILES=$\\(mktemp\\)\nNEW_FILES=$\\(mktemp\\)\ntrap \"rm -f $OLD_FILES $NEW_FILES\" EXIT\n\n# --- Get file lists, filtered ---\nfilter_files\\(\\) {\n    grep -E \"\\\\.\\($EXTENSIONS\\)$\" | grep -v \"^\\\\.claude/\" | grep -v \"^docs/FastMCP_2.9.0_docs.md\"\n}\n\ngit ls-tree -r --name-only \"$FORK_COMMIT\" | filter_files | sort > \"$OLD_FILES\"\ngit ls-tree -r --name-only \"$HEAD_COMMIT\" | filter_files | sort > \"$NEW_FILES\"\n\nOLD_COUNT=$\\(wc -l < \"$OLD_FILES\" | tr -d ' '\\)\nNEW_COUNT=$\\(wc -l < \"$NEW_FILES\" | tr -d ' '\\)\n\necho \"============================================================\"\necho \" CODEBASE COMPARISON: $FORK_COMMIT \\(fork point\\) vs HEAD\"\necho \"============================================================\"\necho \"\"\n\n# =====================================================\n# 1. FILE COUNT COMPARISON\n# =====================================================\necho \"## 1. FILE COUNT COMPARISON\"\necho \"\"\necho \"Files at fork point \\($FORK_COMMIT\\): $OLD_COUNT\"\necho \"Files at HEAD:                      $NEW_COUNT\"\necho \"\"\n\n# Count by extension at each point\necho \"By extension:\"\nprintf \"  %-10s %-12s %-12s\\\\n\" \"Extension\" \"Fork\" \"HEAD\"\nprintf \"  %-10s %-12s %-12s\\\\n\" \"---------\" \"----\" \"----\"\nfor ext in py md sh toml json; do\n    old_n=$\\(grep -c \"\\\\.$ext$\" \"$OLD_FILES\" || true\\)\n    new_n=$\\(grep -c \"\\\\.$ext$\" \"$NEW_FILES\" || true\\)\n    printf \"  %-10s %-12s %-12s\\\\n\" \".$ext\" \"$old_n\" \"$new_n\"\ndone\necho \"\"\n\n# =====================================================\n# 2. PER-FILE ANALYSIS \\(files that existed at fork point\\)\n# =====================================================\necho \"## 2. PER-FILE LOC ANALYSIS \\(original files\\)\"\necho \"\"\nprintf \"  %-60s %8s %8s %8s %8s\\\\n\" \"File\" \"OldLOC\" \"Exists?\" \"NewLOC\" \"Removed\"\nprintf \"  %-60s %8s %8s %8s %8s\\\\n\" \"----\" \"------\" \"-------\" \"------\" \"-------\"\n\ntotal_old_loc=0\ntotal_surviving_loc=0\ntotal_removed_lines=0\nfiles_still_exist=0\nfiles_deleted=0\n\nwhile IFS= read -r file; do\n    # LOC at fork point\n    old_loc=$\\(git show \"$FORK_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_old_loc=$\\(\\(total_old_loc + old_loc\\)\\)\n\n    # Check if file exists at HEAD\n    if git show \"$HEAD_COMMIT:$file\" >/dev/null 2>&1; then\n        exists=\"YES\"\n        files_still_exist=$\\(\\(files_still_exist + 1\\)\\)\n        new_loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n\n        # Count removed lines \\(lines starting with - but not ---\\)\n        removed=$\\(git diff \"$FORK_COMMIT\" \"$HEAD_COMMIT\" -- \"$file\" 2>/dev/null | grep -E \"^-[^-]\" | wc -l | tr -d ' '\\)\n        total_removed_lines=$\\(\\(total_removed_lines + removed\\)\\)\n\n        # Surviving original lines = old_loc - removed\n        surviving=$\\(\\(old_loc - removed\\)\\)\n        if [ \"$surviving\" -lt 0 ]; then surviving=0; fi\n        total_surviving_loc=$\\(\\(total_surviving_loc + surviving\\)\\)\n\n        printf \"  %-60s %8s %8s %8s %8s\\\\n\" \"$file\" \"$old_loc\" \"$exists\" \"$new_loc\" \"$removed\"\n    else\n        exists=\"NO\"\n        files_deleted=$\\(\\(files_deleted + 1\\)\\)\n        # All lines removed since file is gone\n        total_removed_lines=$\\(\\(total_removed_lines + old_loc\\)\\)\n        printf \"  %-60s %8s %8s %8s %8s\\\\n\" \"$file\" \"$old_loc\" \"$exists\" \"-\" \"$old_loc\"\n    fi\ndone < \"$OLD_FILES\"\n\necho \"\"\necho \"  Files still existing: $files_still_exist / $OLD_COUNT\"\necho \"  Files deleted:        $files_deleted / $OLD_COUNT\"\necho \"\"\n\n# =====================================================\n# 3. NEW FILES \\(exist now but not at fork point\\)\n# =====================================================\necho \"## 3. NEW FILES \\(did not exist at fork point\\)\"\necho \"\"\n\n# Find files in HEAD but not at fork\nNEW_ONLY=$\\(comm -13 \"$OLD_FILES\" \"$NEW_FILES\"\\)\nnew_file_count=0\ntotal_new_loc=0\n\nprintf \"  %-70s %8s\\\\n\" \"File\" \"LOC\"\nprintf \"  %-70s %8s\\\\n\" \"----\" \"---\"\n\nwhile IFS= read -r file; do\n    if [ -z \"$file\" ]; then continue; fi\n    new_file_count=$\\(\\(new_file_count + 1\\)\\)\n    loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_new_loc=$\\(\\(total_new_loc + loc\\)\\)\n    printf \"  %-70s %8s\\\\n\" \"$file\" \"$loc\"\ndone <<< \"$NEW_ONLY\"\n\necho \"\"\necho \"  Total new files: $new_file_count\"\necho \"  Total new LOC:   $total_new_loc\"\necho \"\"\n\n# =====================================================\n# 4. TOTAL CURRENT LOC \\(all tracked files at HEAD\\)\n# =====================================================\ntotal_current_loc=0\nwhile IFS= read -r file; do\n    loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_current_loc=$\\(\\(total_current_loc + loc\\)\\)\ndone < \"$NEW_FILES\"\n\n# =====================================================\n# 5. SUMMARY\n# =====================================================\necho \"============================================================\"\necho \" SUMMARY STATISTICS\"\necho \"============================================================\"\necho \"\"\necho \"  Total original LOC at fork point:       $total_old_loc\"\necho \"  Total current LOC \\(HEAD, tracked\\):      $total_current_loc\"\necho \"\"\necho \"  Lines from original that survived:       $total_surviving_loc\"\necho \"  Lines from original that were removed:   $total_removed_lines\"\necho \"  LOC in entirely new files:               $total_new_loc\"\necho \"\"\n\n# LOC in modified original files at HEAD \\(current version of old files\\)\nloc_in_old_files_now=0\nwhile IFS= read -r file; do\n    if git show \"$HEAD_COMMIT:$file\" >/dev/null 2>&1; then\n        loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n        loc_in_old_files_now=$\\(\\(loc_in_old_files_now + loc\\)\\)\n    fi\ndone < \"$OLD_FILES\"\n\n# New lines added to existing files = current LOC in those files - surviving original lines\nnew_lines_in_old_files=$\\(\\(loc_in_old_files_now - total_surviving_loc\\)\\)\n\necho \"  Current LOC in files that existed at fork: $loc_in_old_files_now\"\necho \"    - Of which, original surviving lines:     $total_surviving_loc\"\necho \"    - Of which, newly added lines:            $new_lines_in_old_files\"\necho \"\"\n\n# Percentages\nif [ \"$total_current_loc\" -gt 0 ]; then\n    pct_surviving=$\\(echo \"scale=1; $total_surviving_loc * 100 / $total_current_loc\" | bc\\)\n    pct_new_files=$\\(echo \"scale=1; $total_new_loc * 100 / $total_current_loc\" | bc\\)\n    pct_new_in_old=$\\(echo \"scale=1; $new_lines_in_old_files * 100 / $total_current_loc\" | bc\\)\n    pct_total_new=$\\(echo \"scale=1; \\($total_new_loc + $new_lines_in_old_files\\) * 100 / $total_current_loc\" | bc\\)\n    pct_original=$\\(echo \"scale=1; $total_surviving_loc * 100 / $total_current_loc\" | bc\\)\nelse\n    pct_surviving=0; pct_new_files=0; pct_new_in_old=0; pct_total_new=0; pct_original=0\nfi\n\necho \"  COMPOSITION OF CURRENT CODEBASE:\"\necho \"  ─────────────────────────────────\"\necho \"  Original surviving code:    ${pct_surviving}%  \\($total_surviving_loc LOC\\)\"\necho \"  New code in existing files: ${pct_new_in_old}%  \\($new_lines_in_old_files LOC\\)\"\necho \"  Code in entirely new files: ${pct_new_files}%  \\($total_new_loc LOC\\)\"\necho \"\"\necho \"  >>> ORIGINAL vs NEW: ${pct_original}% original / ${pct_total_new}% new <<<\"\necho \"\"\necho \"============================================================\"\nSCRIPTEOF)",
      "Bash(\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp/_analyze_fork.sh\" << 'SCRIPTEOF'\n#!/bin/bash\n# Analysis script: compare codebase at fork point \\(5658933\\) vs current HEAD\n# Excludes .claude/ directory and docs/FastMCP_2.9.0_docs.md\n\nREPO=\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\"\ncd \"$REPO\"\n\nFORK_COMMIT=\"5658933\"\nHEAD_COMMIT=\"HEAD\"\nEXTENSIONS=\"py|md|sh|toml|json\"\n\n# Temporary files\nOLD_FILES=$\\(mktemp\\)\nNEW_FILES=$\\(mktemp\\)\ntrap \"rm -f $OLD_FILES $NEW_FILES\" EXIT\n\n# --- Get file lists, filtered ---\nfilter_files\\(\\) {\n    grep -E \"\\\\.\\($EXTENSIONS\\)$\" | grep -v \"^\\\\.claude/\" | grep -v \"^docs/FastMCP_2.9.0_docs.md\"\n}\n\ngit ls-tree -r --name-only \"$FORK_COMMIT\" | filter_files | sort > \"$OLD_FILES\"\ngit ls-tree -r --name-only \"$HEAD_COMMIT\" | filter_files | sort > \"$NEW_FILES\"\n\nOLD_COUNT=$\\(wc -l < \"$OLD_FILES\" | tr -d ' '\\)\nNEW_COUNT=$\\(wc -l < \"$NEW_FILES\" | tr -d ' '\\)\n\necho \"============================================================\"\necho \" CODEBASE COMPARISON: $FORK_COMMIT \\(fork point\\) vs HEAD\"\necho \"============================================================\"\necho \"\"\n\n# =====================================================\n# 1. FILE COUNT COMPARISON\n# =====================================================\necho \"## 1. FILE COUNT COMPARISON\"\necho \"\"\necho \"Files at fork point \\($FORK_COMMIT\\): $OLD_COUNT\"\necho \"Files at HEAD:                      $NEW_COUNT\"\necho \"\"\n\necho \"By extension:\"\nprintf \"  %-10s %-12s %-12s\\\\n\" \"Extension\" \"Fork\" \"HEAD\"\nprintf \"  %-10s %-12s %-12s\\\\n\" \"---------\" \"----\" \"----\"\nfor ext in py md sh toml json; do\n    old_n=$\\(grep -c \"\\\\.$ext$\" \"$OLD_FILES\" 2>/dev/null || echo 0\\)\n    new_n=$\\(grep -c \"\\\\.$ext$\" \"$NEW_FILES\" 2>/dev/null || echo 0\\)\n    printf \"  %-10s %-12s %-12s\\\\n\" \".$ext\" \"$old_n\" \"$new_n\"\ndone\necho \"\"\n\n# =====================================================\n# 2. PER-FILE ANALYSIS \\(files that existed at fork point\\)\n# =====================================================\necho \"## 2. PER-FILE LOC ANALYSIS \\(original files\\)\"\necho \"\"\nprintf \"  %-55s %8s %8s %8s %8s\\\\n\" \"File\" \"OldLOC\" \"Exists?\" \"NewLOC\" \"Removed\"\nprintf \"  %-55s %8s %8s %8s %8s\\\\n\" \"$\\(printf '%.0s-' {1..55}\\)\" \"------\" \"-------\" \"------\" \"-------\"\n\ntotal_old_loc=0\ntotal_surviving_loc=0\ntotal_removed_lines=0\nfiles_still_exist=0\nfiles_deleted=0\n\nwhile IFS= read -r file; do\n    # LOC at fork point\n    old_loc=$\\(git show \"$FORK_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_old_loc=$\\(\\(total_old_loc + old_loc\\)\\)\n\n    # Check if file exists at HEAD \\(use git cat-file to check\\)\n    if git cat-file -e \"$HEAD_COMMIT:$file\" 2>/dev/null; then\n        exists=\"YES\"\n        files_still_exist=$\\(\\(files_still_exist + 1\\)\\)\n        new_loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n\n        # Count removed lines \\(lines starting with - but not --- header\\)\n        removed=$\\(git diff \"$FORK_COMMIT\" \"$HEAD_COMMIT\" -- \"$file\" 2>/dev/null | grep -E \"^-[^-]\" | wc -l | tr -d ' '\\)\n        total_removed_lines=$\\(\\(total_removed_lines + removed\\)\\)\n\n        # Surviving original lines = old_loc - removed\n        surviving=$\\(\\(old_loc - removed\\)\\)\n        if [ \"$surviving\" -lt 0 ]; then surviving=0; fi\n        total_surviving_loc=$\\(\\(total_surviving_loc + surviving\\)\\)\n\n        printf \"  %-55s %8s %8s %8s %8s\\\\n\" \"$file\" \"$old_loc\" \"$exists\" \"$new_loc\" \"$removed\"\n    else\n        exists=\"NO\"\n        files_deleted=$\\(\\(files_deleted + 1\\)\\)\n        total_removed_lines=$\\(\\(total_removed_lines + old_loc\\)\\)\n        printf \"  %-55s %8s %8s %8s %8s\\\\n\" \"$file\" \"$old_loc\" \"$exists\" \"-\" \"$old_loc\"\n    fi\ndone < \"$OLD_FILES\"\n\necho \"\"\necho \"  Files still existing: $files_still_exist / $OLD_COUNT\"\necho \"  Files deleted:        $files_deleted / $OLD_COUNT\"\necho \"\"\n\n# =====================================================\n# 3. NEW FILES \\(exist now but not at fork point\\)\n# =====================================================\necho \"## 3. NEW FILES \\(did not exist at fork point\\)\"\necho \"\"\n\nNEW_ONLY=$\\(comm -13 \"$OLD_FILES\" \"$NEW_FILES\"\\)\nnew_file_count=0\ntotal_new_loc=0\n\nprintf \"  %-70s %8s\\\\n\" \"File\" \"LOC\"\nprintf \"  %-70s %8s\\\\n\" \"$\\(printf '%.0s-' {1..70}\\)\" \"---\"\n\nwhile IFS= read -r file; do\n    if [ -z \"$file\" ]; then continue; fi\n    new_file_count=$\\(\\(new_file_count + 1\\)\\)\n    loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_new_loc=$\\(\\(total_new_loc + loc\\)\\)\n    printf \"  %-70s %8s\\\\n\" \"$file\" \"$loc\"\ndone <<< \"$NEW_ONLY\"\n\necho \"\"\necho \"  Total new files: $new_file_count\"\necho \"  Total new LOC:   $total_new_loc\"\necho \"\"\n\n# =====================================================\n# 4. TOTAL CURRENT LOC \\(all tracked files at HEAD\\)\n# =====================================================\ntotal_current_loc=0\nwhile IFS= read -r file; do\n    loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n    total_current_loc=$\\(\\(total_current_loc + loc\\)\\)\ndone < \"$NEW_FILES\"\n\n# =====================================================\n# 5. SUMMARY\n# =====================================================\n\n# LOC in modified original files at HEAD\nloc_in_old_files_now=0\nwhile IFS= read -r file; do\n    if git cat-file -e \"$HEAD_COMMIT:$file\" 2>/dev/null; then\n        loc=$\\(git show \"$HEAD_COMMIT:$file\" 2>/dev/null | wc -l | tr -d ' '\\)\n        loc_in_old_files_now=$\\(\\(loc_in_old_files_now + loc\\)\\)\n    fi\ndone < \"$OLD_FILES\"\n\nnew_lines_in_old_files=$\\(\\(loc_in_old_files_now - total_surviving_loc\\)\\)\n\necho \"============================================================\"\necho \" SUMMARY STATISTICS\"\necho \"============================================================\"\necho \"\"\necho \"  Total original LOC at fork point:       $total_old_loc\"\necho \"  Total current LOC \\(HEAD, tracked\\):      $total_current_loc\"\necho \"\"\necho \"  Lines from original that survived:       $total_surviving_loc\"\necho \"  Lines from original that were removed:   $total_removed_lines\"\necho \"  LOC in entirely new files:               $total_new_loc\"\necho \"\"\necho \"  Current LOC in files that existed at fork: $loc_in_old_files_now\"\necho \"    - Of which, original surviving lines:     $total_surviving_loc\"\necho \"    - Of which, newly added lines:            $new_lines_in_old_files\"\necho \"\"\n\n# Percentages\nif [ \"$total_current_loc\" -gt 0 ]; then\n    pct_surviving=$\\(echo \"scale=1; $total_surviving_loc * 100 / $total_current_loc\" | bc\\)\n    pct_new_files=$\\(echo \"scale=1; $total_new_loc * 100 / $total_current_loc\" | bc\\)\n    pct_new_in_old=$\\(echo \"scale=1; $new_lines_in_old_files * 100 / $total_current_loc\" | bc\\)\n    pct_total_new=$\\(echo \"scale=1; \\($total_new_loc + $new_lines_in_old_files\\) * 100 / $total_current_loc\" | bc\\)\n    pct_original=$\\(echo \"scale=1; $total_surviving_loc * 100 / $total_current_loc\" | bc\\)\nelse\n    pct_surviving=0; pct_new_files=0; pct_new_in_old=0; pct_total_new=0; pct_original=0\nfi\n\necho \"  COMPOSITION OF CURRENT CODEBASE:\"\necho \"  ---------------------------------\"\necho \"  Original surviving code:    ${pct_surviving}%  \\($total_surviving_loc LOC\\)\"\necho \"  New code in existing files: ${pct_new_in_old}%  \\($new_lines_in_old_files LOC\\)\"\necho \"  Code in entirely new files: ${pct_new_files}%  \\($total_new_loc LOC\\)\"\necho \"\"\necho \"  >>> ORIGINAL vs NEW: ${pct_original}% original / ${pct_total_new}% new <<<\"\necho \"\"\necho \"============================================================\"\nSCRIPTEOF)",
      "Bash(gh search:*)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" remote -v)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline --format=\"%H %an\")",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" shortlog -sn --all)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline --all --author=\"study-flamingo\\\\|Joel\")",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline --all)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --oneline --all --author=\"study-flamingo\\\\|Joel\" --diff-filter=A --stat)",
      "Bash(git -C \"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/gamemaster-mcp\" log --format=\"%H\" --reverse)",
      "Bash(cloc:*)",
      "Bash(git log:*)",
      "Bash(git remote remove:*)",
      "Bash(git remote rename:*)",
      "Bash(gh repo delete:*)",
      "Bash(du:*)",
      "Bash(export PYTHONPATH=src:*)",
      "Bash(/usr/local/bin/uv run python:*)",
      "Bash(chflags:*)",
      "Bash(PYTHONPATH=\"/Users/ema/Library/Mobile Documents/com~apple~CloudDocs/GitHub la Clonazione/dm20-protocol/src\" uv run python:*)",
      "Bash(PYTHONPATH=src DM20_STORAGE_DIR=data timeout 5 uv run python:*)",
      "Bash(DM20_STORAGE_DIR=data timeout 5 uv run:*)",
      "Bash(DM20_STORAGE_DIR=data timeout 3 uv run:*)",
      "Bash(DM20_STORAGE_DIR=data uv run python:*)",
      "WebFetch(domain:block.github.io)",
      "WebFetch(domain:claudelog.com)",
      "WebFetch(domain:www.elasticpath.com)",
      "WebFetch(domain:en.bioerrorlog.work)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "dm20-protocol"
  ],
  "outputStyle": "Learning"
}
